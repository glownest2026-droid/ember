{
  "pr": {
    "number": null,
    "title": "Fix /family \"My list\" persistence plumbing by implementing the missing database upsert function + canonical list item storage, so Want/Have/Gift toggles work without errors.",
    "branch": "feat/family-list-plumbing-fix",
    "base": "main",
    "url": null,
    "vercel_preview_url": null,
    "rollback": "Revert PR. DB: DROP TABLE IF EXISTS public.user_list_items CASCADE; optionally restore get_my_subnav_stats from 202602190000."
  },
  "receipt": {
    "goal": "Fix list persistence + missing RPC so /family toggles work without errors.",
    "commands_run": ["git checkout main", "git pull origin main", "git checkout -b feat/family-list-plumbing-fix", "cd web && pnpm install && pnpm run build"],
    "files_changed": [
      "supabase/sql/202602260000_family_user_list_items_and_rpc.sql",
      "supabase/sql/verify_family_user_list_items_and_rpc.sql",
      "web/src/components/family/FamilyDashboardClient.tsx",
      "PROGRESS.md",
      "state/latest.json"
    ],
    "qa_steps": [
      "Apply migration in Supabase SQL Editor (paste 202602260000 file); run verify script.",
      "Sign in; go to /family; confirm Ideas/Products/Gifts tabs show counts from user_list_items.",
      "Toggle Want, Have, or Gift on a list item; confirm no error banner; see calm message only if RPC fails.",
      "Check browser console for [family] upsert_user_list_item if error occurs."
    ],
    "rollback": "Revert PR. DB: DROP TABLE IF EXISTS public.user_list_items CASCADE; then restore get_my_subnav_stats from 202602190000 if needed."
  },
  "commit": null,
  "timestamp": "2026-02-26T00:00:00.000Z"
}
